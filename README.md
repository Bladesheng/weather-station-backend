# weather-station-backend

## About this repository

Backend REST API and database for my weather station.

Serves as data source for my weather station fronted [web app](https://github.com/Bladesheng/weather-station-frontend)

Uses Postgres to store 2x temperature, humidity and pressure readings every 5 minutes generated by my [weather station](https://github.com/Bladesheng/weather-station-V1)

The Express REST API includes endpoints for basic CRUD HTTP requests for manipulating the database.

Creating, updating and deleting records in database is protected by password passed in headers.

The database and API is hosted on fly.io

## Building locally

- Clone the repo, then create `.env` file - see [`.env.example`](https://github.com/Bladesheng/weather-station-backend/blob/main/.env.example)

- Install packages:

```sh
npm install
```

- Now you have 2 options:

### a) Local dev server + local database

- Push Prisma schema to the database and seed it:

```sh
npm run db:push
npm run db:seed
```

- Run the dev server:

```sh
npm run dev
```

### b) Dockerized dev server + dockerized database

- Run the server and database container:

```sh
npm run docker
```

- Once the app container is running, push Prisma schema to the databse seed it:

```sh
npm run db:push
npm run db:seed
```

Example API requests in [Postman](https://www.postman.com/telecoms-operator-36486599/workspace/weather-station/request/24296961-8ced04cb-946c-4b14-909f-a094c9b36d4f)

Formatting with `Prettier` and linting with `ESLint`:

```sh
npm run format
npm run lint
```
